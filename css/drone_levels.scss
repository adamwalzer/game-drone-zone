@import 'variables';
@import 'mixins';

[id*=drone-level] {
    .instructions {
        @include center;
        top: 48%;
        left: 18%;
        width: 36%;
        height: 70%;
        text-align: center;
        color: $red;

        .level,
        .copy {
            display: block;
            position: absolute;
            width: 100%;
            text-shadow: 3px 3px 5px $white;
        }

        .level {
            font-family: 'Luckiest Guy', 'Source Sans Pro', 'Helvetica Neue', Helvetica, sans-serif;
            font-size: 85px;
        }

        .copy {
            top: 30%;
            line-height: 45px;
            font-family: 'Lilita One', 'Source Sans Pro', 'Helvetica Neue', Helvetica, sans-serif;
            font-size: 35px;
        }
    }

    .path {
        @include background('#{$image}path.png');
        @include center;
        top: 48%;
        left: 65%;
        width: 60%;
        height: 70%;

        .start,
        .finish {
            position: absolute;
            text-shadow: 2px -2px $white;
            color: $red;
            font-family: 'Luckiest Guy', 'Source Sans Pro', 'Helvetica Neue', Helvetica, sans-serif;
            font-size: 45px;
        }

        .start {
            top: 11%;
            left: 26%;
        }

        .finish {
            top: 88%;
            left: 70%;
        }

        .drone {
            @include path-icons(1, 200px, 100px);
            position: absolute;
        }

        .selectable {
            $tops:   225 130  55;
            $lefts:   25 160 460;
            @for $i from 1 through length($tops) {
                .lock-#{$i} {
                    @include path-icons(5, 100px, 100px);
                    position: absolute;
                    top: #{nth($tops, $i)}px;
                    left: #{nth($lefts, $i)}px;
                    padding: 10px;
                    pointer-events: none;

                    div {
                        @include sprite-circle-star-grey;
                        position: absolute;
                        top: -20px;
                        left: 50%;

                        &.earned {
                            @include sprite-circle-star;
                        }

                        @for $j from 1 through 3 {
                            &:nth-of-type(#{$j}) {
                                transform: translateX(-50%) rotate(#{-40 + 20 * $j}deg);
                                transform-origin: 50% 300%;
                            }
                        }
                    }

                    .level {
                        @include center;
                        opacity: 0;
                        width: 100%;
                        text-shadow: 3px 2px 0 $black;
                    }
                }
            }
        }
    }

    .reveal {
        &.open-fact {
            .close-reveal {
                @include nav-button(2, 80px, 80px);
                position: absolute;
                top: 10%;
                right: 16%;
            }
        }

        .fact {
            @include background('#{$image}flygameframe.png');
            width: 72%;
            height: 100%;
            color: $white;

            .header {
                position: absolute;
                top: 11%;
                left: 50%;
                transform: translateX(-50%);
                background: $black-transparancy;
                padding: 15px;
                width: 95%;
                text-shadow: 5px 2px 5px $black;
                font-size: 60px;
            }

            p {
                @include center;
                width: 95%;
                text-shadow: 2px 2px 10px $black;
                line-height: 35px;
                font-size: 30px;
            }
        }
    }
}


$icons:   2   3   4;
$tops:  150  60   0;
$lefts:   0 120 420;

@for $i from 1 through 3 {
    #drone-level-#{$i} {
        .selectable {
            @if $i > 2 {
                .lock-#{$i - 2} {
                    @include path-icons(nth($icons, $i - 2), 115px, 115px);
                    pointer-events: auto;

                    .level {
                        opacity: 1;
                    }
                }
            }

            @if $i > 1 {
                .lock-#{$i - 1} {
                    @include path-icons(nth($icons, $i - 1), 115px, 115px);
                    pointer-events: auto;

                    .level {
                        opacity: 1;
                    }
                }
            }

            .lock-#{$i} {
                @include path-icons(nth($icons, $i), 115px, 115px);
                pointer-events: auto;

                .level {
                    opacity: 1;
                }
            }
        }

        .drone {
            top: #{nth($tops, $i)}px;
            left: #{nth($lefts, $i)}px;
        }

        &::before {
            @include instruction-bkg($i, 960px, 138px);
            position: absolute;
            bottom: 0;
            content: '';
        }
    }
}
